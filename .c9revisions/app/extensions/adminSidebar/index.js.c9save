{"ts":1401241249433,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var path = require('path'),\n    fs = require('fs'),\n    flatiron = require('flatiron'),\n    common = flatiron.common,\n    existsSync = fs.existsSync || path.existsSync\n\nvar Plates = require('plates');\n\nexports.name = 'adminSidebar';\n\n\nvar extensionsDir = \"\";\n\nvar menu = {};\n\nvar menuDef = {title:\"\", href:\"\",iconClass:\"\", children:{}}\n\nexports.getMenu = function(fullMenu)\n{\n    var alllinks=\"\";\n    \n    if (!(typeof fullMenu === \"undefined\")){\n        fullMenu.forEach(function (menu) {\n           // console.log(menu.children);\n           if (menu.children == \"\")\n           {\n              // console.log(\"got to single\");\n             var item = getSingleNav(menu.title, menu.href, menu.iconClass);\n              alllinks += item;\n             //  console.log(alllinks);\n           }else{\n               \n              \n            var item = getMultiNav(menu.title, menu.href, menu.iconClass, menu.children);\n             alllinks += item;\n               \n           }\n        });\n    } else {\n        var dashboard = getSingleNav(\"Dashboard\",\"assets/devoops/ajax/dashboard.html\", \"fa fa-dashboard\");\n        var siteEditor = getSingleNav(\"Site Editor\",\"assets/views/admin/siteEditor.html\", \"fa fa-dashboard\");\n        \n        var chartpages = [{href:\"assets/devoops/ajax/charts_xcharts.html\", title:\"xCharts\"},\n        {href:\"assets/devoops/ajax/charts_flot.html\", title:\"Flot Charts\"}]\n        \n        var chartmenu = getMultiNav(\"Charts\",\"#\",\"fa fa-bar-chart-o\",chartpages);\n        \n         alllinks = dashboard + siteEditor + chartmenu;\n    }\n    var htmloutput = getMenuHTML(alllinks);\n    \n    return htmloutput;\n    \n    \n}\n\nexports.init = function (extensionsDir) {\n  var app = this\n\n\n  \n\n // app.ui = app.ui || {}\n\n\n \n    extensionsDir = extensionsDir;\n \n//menu.push({name:});\n  \n  }\nfunction getLinkItem(title, href)\n{\n    var singleNav =  fs.readFileSync(__dirname + '/views/linkitem.html', \"utf-8\");\n    \n    var data = { \"navhref\": href,\"title\": title};\n    \n     \n    var map = Plates.Map();\n\n    map.where('class').is('ajax-link').use('navhref').as('href');\n   \n    map.class('ajax-link').to('title');\n    \n    var output = Plates.bind(singleNav, data, map);\n    \n    return output;\n}\nfunction getSingleNav(title, href, imgclass)\n{\n    var singleNav =  fs.readFileSync(__dirname + '/views/singleNav.html', \"utf-8\");\n    \n    var data = { \"navhref\": href,\"imgclass\": imgclass ,\"title\": title};\n    \n     \n    var map = Plates.Map();\n\n    map.where('class').is('ajax-link').use('navhref').as('href');\n     map.where('data-name').is('icon').use('imgclass').as('class');\n    map.class('hidden-xs').to('title');\n    \n    var output = Plates.bind(singleNav, data, map);\n    \n    return output;\n}\nfunction getMultiNav(title, href, imgclass, sublinks)\n{\n    var sublinkhtml = \"\";\n   \n    \n     sublinks.forEach(function (page) {\n          sublinkhtml+= getLinkItem(page.title, page.href);\n         \n     });\n    \n    var multiVav =  fs.readFileSync(__dirname + '/views/multiNav.html', \"utf-8\");\n    \n    var data = { \"navhref\": href,\"imgclass\": imgclass ,\"title\": title, \"children\": sublinkhtml};\n    \n     \n    var map = Plates.Map();\n\n    map.where('class').is('active ajax-link').use('navhref').as('href');\n     map.where('data-name').is('icon').use('imgclass').as('class');\n    map.class('hidden-xs').to('title');\n     map.class('dropdown-menu').to('children');\n     \n    var output = Plates.bind(multiVav, data, map);\n    \n    return output;\n}\nfunction getMenuHTML(dashboardItems)\n{\n     var html = fs.readFileSync(__dirname + '/views/index.html', \"utf-8\");\n    \n    var outerdata={\"menuitems\": dashboardItems};\n    var outermap = Plates.Map();\n     outermap.class('nav main-menu').to('menuitems');\n    \n     var htmloutput = Plates.bind(html, outerdata, outermap);\n    return htmloutput;\n}\n\n   \n  \n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":3824}]],"length":3824}
