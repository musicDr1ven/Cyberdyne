{"ts":1401248298102,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var app = require('express')();\nvar server = require('http').createServer(app);\nvar webRTC = require('webrtc.io').listen(server);\n\nvar port = process.env.PORT || 8080;\nserver.listen(port);\n\n\n\napp.get('/', function(req, res) {\n  res.sendfile(__dirname + '/index.html');\n});\n\napp.get('/style.css', function(req, res) {\n  res.sendfile(__dirname + '/style.css');\n});\n\napp.get('/fullscrean.png', function(req, res) {\n  res.sendfile(__dirname + '/fullscrean.png');\n});\n\napp.get('/script.js', function(req, res) {\n  res.sendfile(__dirname + '/script.js');\n});\n\napp.get('/webrtc.io.js', function(req, res) {\n  res.sendfile(__dirname + '/webrtc.io.js');\n});\n\nwebRTC.rtc.on('chat_msg', function(data, socket) {\n  var roomList = webRTC.rtc.rooms[data.room] || [];\n\n  for (var i = 0; i < roomList.length; i++) {\n    var socketId = roomList[i];\n\n    if (socketId !== socket.id) {\n      var soc = webRTC.rtc.getSocket(socketId);\n\n      if (soc) {\n        soc.send(JSON.stringify({\n          \"eventName\": \"receive_chat_msg\",\n          \"data\": {\n            \"messages\": data.messages,\n            \"color\": data.color\n          }\n        }), function(error) {\n          if (error) {\n            console.log(error);\n          }\n        });\n      }\n    }\n  }\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":1244}]],"length":1244}
